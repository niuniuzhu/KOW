syntax = "proto3";
package Protos;

import "Global.proto";

//登录结果
message BS2GC_LoginRet {
	MsgOpts opts = 1;
	Global.ECommon result = 2;
	int32 rndSeed = 3;//随机种子
	int32 frameRate = 4;//逻辑帧速
	int32 keyframeStep = 5;//关键帧步长
	int32 battleTime = 6;//战场限时
	int32 mapID = 7;//地图id
}

//回应战场快照
message BS2GC_RequestSnapshotRet {
	enum EResult {
		Success = 0;
		InvalidUser = 1;
		InvalidBattle = 2;
	}
	MsgOpts opts = 1;
	EResult result = 2;
	int32 reqFrame = 3;//请求快照的帧数
	int32 curFrame = 4;//当前服务端帧数
	bytes snapshot = 5;//快照数据
}

//战场结束
message BS2GC_BattleEnd {
	MsgOpts opts = 1;
	uint32 id = 2;//战场id
}

//广播帧行为
message BS2GC_FrameAction {
	MsgOpts opts = 1;
	int32 frame = 2;
	bytes action = 3;//玩家ID到帧行为(已序列化)的映射
}

//回应请求帧行为记录
message BS2GC_RequestFrameActionsRet {
	MsgOpts opts = 1;
	repeated int32 frames = 2;
	repeated bytes actions = 3;
}